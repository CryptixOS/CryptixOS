packages:

  - name: bzip2
    architecture: '@OPTION:arch@'
    metadata:
      summary: A high-quality data compressor
      description: This package contains programs for compressing and decompressing files.
      spdx: 'bzip2-1.0.6'
      website: 'https://gitlab.com/federicomenaquintero/bzip2'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['app-arch']
    source:
      subdir: sources
      url: 'https://www.sourceware.org/pub/bzip2/bzip2-1.0.8.tar.gz'
      format: 'tar.gz'
      checksum: blake2b:22ab3acd84f4db8c3d6f59340c252faedfd4447cea00dafbd652e65b6cf8a20adf6835c22e58563004cfafdb15348c924996230b4b23cae42da5e25eeac4bdad
      extract_path: 'bzip2-1.0.8'
      version: '1.0.8'
    tools_required:
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 10
    configure:
      - args: ['cp', '-r', '@THIS_SOURCE_DIR@/.', '@THIS_BUILD_DIR@']
      # Remove the test directory from the Makefile, as it tries to run (and fail on) the tests
      - args: 'sed -i s/"all: libbz2.a bzip2 bzip2recover test"/"all: libbz2.a bzip2 bzip2recover"/ @THIS_BUILD_DIR@/Makefile'
    build:
      # Building Makefile-libbz2_so first makes all programs link against libbz2.so
      - args: ['make', 'CC=@OPTION:arch-triple@-gcc', 'CFLAGS=-fPIC', '-f', 'Makefile-libbz2_so']
      - args: ['make', 'clean']
      - args: ['make', 'CC=@OPTION:arch-triple@-gcc', 'CFLAGS=-fPIC', '-j@PARALLELISM@']
      - args: ['make', 'PREFIX=@THIS_COLLECT_DIR@/usr', 'install']
      - args: ['ln', '-sf', 'bzdiff', '@THIS_COLLECT_DIR@/usr/bin/bzcmp']
      - args: ['ln', '-sf', 'bzgrep', '@THIS_COLLECT_DIR@/usr/bin/bzegrep']
      - args: ['ln', '-sf', 'bzgrep', '@THIS_COLLECT_DIR@/usr/bin/bzfgrep']
      - args: ['ln', '-sf', 'bzmore', '@THIS_COLLECT_DIR@/usr/bin/bzless']
  - name: freetype
    architecture: '@OPTION:arch@'
    metadata:
      summary: High-quality and portable font engine
      description: This package contains a library which allows applications to properly render TrueType fonts.
      spdx: 'GPL-2.0-or-later'
      website: 'https://www.freetype.org/'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['media-libs']
    source:
      subdir: 'sources'
      git: 'https://gitlab.freedesktop.org/freetype/freetype.git'
      tag: 'VER-2-13-3'
      version: '2.13.3'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
      regenerate:
        - args: ['./autogen.sh']
          isolate_network: false
          environ:
            NOCONFIGURE: '1'
        - args: ['cp',
            '@BUILD_ROOT@/tools/host-automake-v1.15/share/automake-1.15/config.sub',
            '@THIS_SOURCE_DIR@/builds/unix/']
        # Enable GX/AAT and OpenType table validation
        - args: |
            sed -ri "s:.*(AUX_MODULES.*valid):\1:" @THIS_SOURCE_DIR@/modules.cfg
        # Enable subpixel rendering
        - args: |
            sed -r "s:.*(#.*SUBPIXEL_RENDERING) .*:\1:" -i @THIS_SOURCE_DIR@/include/freetype/config/ftoption.h
    tools_required:
      - system-gcc
    pkgs_required:
      - mlibc
      - bzip2
      - libpng
      - zlib
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--disable-static'
        - '--with-harfbuzz=no'
        - '--enable-freetype-config'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
  - name: fontconfig
    architecture: '@OPTION:arch@'
    metadata:
      summary: A library for configuring and customizing font access
      description: This package contains a library and support programs used for configuring and customizing font access.
      spdx: 'MIT'
      website: 'https://fontconfig.org/'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['media-libs']
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/fontconfig/fontconfig'
      tag: '2.16.0'
      version: '2.16.0'
      tools_required:
        - host-autoconf-v2.71
        - host-automake-v1.16
        - host-libtool
        - host-pkg-config
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
        # Make sure we regenerate this file
        - args: ['rm', '-f', 'src/fcobjshash.h']
    tools_required:
      - host-autoconf-v2.71
      - host-automake-v1.16
      - system-gcc
      - host-libtool
      - host-pkg-config
      - virtual: pkgconfig-for-target
        triple: "@OPTION:arch-triple@"
    pkgs_required:
      - mlibc
      - freetype
      - libxml
      - libiconv
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-docs'
        - '--with-sysroot=@SYSROOT_DIR@' # Set libtool's lt_sysroot.
        - '--enable-libxml2'
        - '--docdir=/usr/share/doc/fontconfig-2.16.0'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libepoxy
    architecture: '@OPTION:arch@'
    metadata:
      summary: Library for handling OpenGL function pointer management
      description: libdisplay-info is a library for handling OpenGL function pointer management.
      spdx: 'MIT'
      website: 'https://github.com/anholt/libepoxy'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['media-libs']
    source:
      subdir: 'sources'
      git: 'https://github.com/anholt/libepoxy.git'
      tag: '1.5.10'
      version: '1.5.10'
    tools_required:
      - host-pkg-config
      - system-gcc
      - virtual: pkgconfig-for-target
        triple: "@OPTION:arch-triple@"
    pkgs_required:
      - mlibc
      - mesa
      - xorg-proto
      - libx11
    revision: 9
    configure:
      - args:
          - 'meson'
          - 'setup'
          - '--cross-file'
          - '@SOURCE_ROOT@/scripts/meson-@OPTION:arch-triple@.cross-file'
          - '--prefix=/usr'
          - '@THIS_SOURCE_DIR@'
    build:
      - args: ['ninja']
      - args: ['ninja', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
        quiet: true
  - name: libfontenc
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libfontenc.git'
      tag: 'libfontenc-1.1.8'
      version: '1.1.8'
      tools_required:
        - host-autoconf-v2.71
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
        - host-xorg-font-util
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - virtual: pkgconfig-for-target
        triple: "@OPTION:arch-triple@"
      - host-autoconf-v2.71
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxtrans
      - xorg-font-util
      - zlib
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
  - name: libice
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libice.git'
      tag: 'libICE-1.1.2'
      version: '1.1.2'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
        - host-xtrans
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxtrans
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libpng
    architecture: '@OPTION:arch@'
    metadata:
      summary: Portable Network Graphics library
      description: This package contains libraries used by other programs for reading and writing PNG files. The PNG format was designed as a replacement for GIF and, to a lesser extent, TIFF, with many improvements and extensions and lack of patent problems.
      spdx: 'no-spdx: libpng'
      website: 'http://www.libpng.org/'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['media-libs']
    source:
      subdir: 'sources'
      url: 'https://downloads.sourceforge.net/libpng/libpng-1.6.44.tar.xz'
      format: 'tar.xz'
      extract_path: 'libpng-1.6.44'
      checksum: blake2b:61064dd83f40a7e2e60ff723a568b7d0cda95aa80621a211aee7127b9783fbfc20cd82a2fe2d03584cbf9ab77c5444e3e008ac5ccc7f64af6e858ebcbcb78822
      version: '1.6.44'
      patch-path-strip: 1
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
      regenerate:
        - args: ['git', 'clean', '-xf', '-e', '*.xbstrap']
        - args: ['autoreconf', '-fvi']
    tools_required:
      - system-gcc
    pkgs_required:
      - mlibc
      - zlib
    revision: 3
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--with-sysroot=@SYSROOT_DIR@' # Set libtool's lt_sysroot.
        - 'CFLAGS=-O2 -g'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
        quiet: true

  - name: libxml
    architecture: '@OPTION:arch@'
    metadata:
      summary: XML C parser and toolkit
      description: This package contains libraries and utilities used for parsing XML files.
      spdx: 'MIT'
      website: 'https://gitlab.gnome.org/GNOME/libxml2/-/wikis/home'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-libs']
    source:
      subdir: sources
      git: 'https://gitlab.gnome.org/GNOME/libxml2.git'
      tag: 'v2.13.6'
      version: '2.13.6'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.16
        - host-libtool
        - host-pkg-config
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
    pkgs_required:
      - mlibc
      - zlib
      - libiconv
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--without-python'
        - '--disable-static'
        - '--with-threads'
        - '--disable-ipv6'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'


  - name: libsm
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libsm.git'
      tag: 'libSM-1.2.6'
      version: '1.2.6'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
        - host-xtrans
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxtrans
      - libice
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxau
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxau.git'
      tag: 'libXau-1.0.12'
      version: '1.0.12'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxcb
    architecture: '@OPTION:arch@'
    metadata:
      summary: X C-language Bindings library
      description: The libxcb package provides an interface to the X Window System protocol, which replaces the current Xlib interface. Xlib can also use XCB as a transport layer, allowing software to make requests and receive responses with both.
      spdx: 'MIT'
      website: 'https://gitlab.freedesktop.org/xorg/lib/libxcb'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['x11-libs']
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxcb.git'
      tag: 'libxcb-1.17.0'
      version: '1.17'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libxau
      - libxdmcp
      - xcb-proto
    revision: 1
    configure:
      - args: ['sed', '-i', "s/pthread-stubs//", '@THIS_SOURCE_DIR@/configure']
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
        - '--without-doxygen'
        - '--with-sysroot=@SYSROOT_DIR@' # Set libtool's lt_sysroot.
        environ:
          PYTHON: 'python3'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxcvt
    architecture: '@OPTION:arch@'
    metadata:
      summary: X.Org xcvt library and cvt program
      description: VESA CVT standard timing modeline generation library & utility.
      spdx: 'MIT'
      website: 'https://wayland.freedesktop.org/xserver.html'
      maintainer: "no92 <no92.mail@gmail.com>"
      categories: ['x11-libs']
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxcvt.git'
      tag: 'libxcvt-0.1.3'
      version: '0.1.3'
    tools_required:
      - system-gcc
      - host-pkg-config
    pkgs_required:
      - mlibc
    revision: 1
    configure:
      - args:
        - 'meson'
        - 'setup'
        - '--cross-file'
        - '@SOURCE_ROOT@/CrossFiles/@OPTION:arch-triple@-target.cross-file'
        - '--prefix=/usr'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['ninja']
      - args: ['ninja', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
  - name: libxdmcp
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxdmcp.git'
      tag: 'libXdmcp-1.1.5'
      version: '1.1.5'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libxau
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
  - name: libxext
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxext.git'
      tag: 'libXext-1.3.6'
      version: '1.3.6'
      tools_required:
        - host-autoconf-v2.71
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.71
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxtrans
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
        - '--disable-malloc0returnsnull'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxfont2
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxfont.git'
      tag: 'libXfont2-2.0.7'
      version: '2.0.7'
      tools_required:
        - host-autoconf-v2.71
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
        - host-xtrans
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-xtrans
      - virtual: pkgconfig-for-target
        triple: "@OPTION:arch-triple@"
      - host-autoconf-v2.71
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxtrans
      - freetype
      - fontconfig
      - bzip2
      - libfontenc
      - zlib
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
        - '--with-bzip2'
        - '--disable-devel-docs'
        # strcasecmp is implicitly declared, probably an missing include somewhere, so disable -Werror for that
        - '--disable-selective-werror'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'


  - name: libxinerama
    architecture: '@OPTION:arch@'
    metadata:
      summary: X.Org Xinerama library
      description: This package contains the X.Org Xinerama library.
      spdx: 'MIT'
      website: 'https://gitlab.freedesktop.org/xorg/lib/libXinerama'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['x11-libs']
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libXinerama.git'
      tag: 'libXinerama-1.1.5'
      version: '1.1.5'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
        - host-xtrans
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxext
    revision: 7
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
        - '--disable-malloc0returnsnull'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxkbfile
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxkbfile.git'
      tag: 'libxkbfile-1.1.3'
      version: '1.1.3'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxmu
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxmu.git'
      tag: 'libXmu-1.2.1'
      version: '1.2.1'
      tools_required:
        - host-autoconf-v2.71
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
        - host-xtrans
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.71
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxext
      - libxtrans
      - libxt
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxshmfence
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxshmfence.git'
      tag: 'libxshmfence-1.3.3'
      version: '1.3.3'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxtrans
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
        - '--disable-futex'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxt
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxt.git'
      tag: 'libXt-1.3.1'
      version: '1.3.1'
      tools_required:
        - host-autoconf-v2.71
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.71
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxtrans
      - libsm
      - libice
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
        - '--disable-malloc0returnsnull'
        - '--with-appdefaultdir=/etc/X11/app-defaults'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxtrans
    architecture: '@OPTION:arch@'
    from_source: libxtrans
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - xorg-util-macros
      - xorg-proto
      - libxcb
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libxxf86vm
    architecture: '@OPTION:arch@'
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libxxf86vm.git'
      tag: 'libXxf86vm-1.1.6'
      version: '1.1.6'
      tools_required:
        - host-autoconf-v2.69
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-autoconf-archive
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libx11
      - libxtrans
      - libxext
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
        - '--disable-malloc0returnsnull'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libx11
    architecture: '@OPTION:arch@'
    metadata:
      summary: X.Org X11 library
      description: This package provides the core X11 library.
      spdx: 'MIT'
      website: 'https://gitlab.freedesktop.org/xorg/lib/libX11'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['x11-libs']
    source:
      subdir: sources
      git: 'https://gitlab.freedesktop.org/xorg/lib/libx11.git'
      tag: 'libX11-1.8.12'
      version: '1.8.12'
      tools_required:
        - host-autoconf-v2.71
        - host-automake-v1.15
        - host-libtool
        - host-pkg-config
        - host-xorg-macros
        - host-xtrans
      regenerate:
        - args: ['./autogen.sh']
          environ:
            'NOCONFIGURE': 'yes'
    tools_required:
      - system-gcc
      - host-autoconf-v2.69
      - host-automake-v1.15
      - host-pkg-config
    pkgs_required:
      - mlibc
      - xorg-util-macros
      - xorg-proto
      - libxcb
      - libxtrans
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
        - '--disable-ipv6'
        - '--disable-malloc0returnsnull'
        - '--with-keysymdefdir=@SYSROOT_DIR@/usr/include/X11'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: xorg-font-util
    architecture: '@OPTION:arch@'
    metadata:
      summary: X.Org font utilities
      description: This package provides various X.Org font utilities.
      spdx: 'MIT'
      website: 'https://gitlab.freedesktop.org/xorg/font/util'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['media-fonts']
    from_source: xorg-font-util
    tools_required:
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--host=@OPTION:arch-triple@'
        - '--prefix=/usr'
        - '--sysconfdir=/etc'
        - '--localstatedir=/var'
        - '--disable-static'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
